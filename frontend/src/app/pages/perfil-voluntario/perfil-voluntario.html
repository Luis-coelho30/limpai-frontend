<div class="relative w-full min-h-screen bg-cover bg-center bg-no-repeat"
     style="background-image: url('https://s2.glbimg.com/srTIL4USLuSsbudYEXOKDuGD70Q=/e.glbimg.com/og/ed/f/original/2021/10/26/flores-de-ipe.jpg');">

       <div class="container mx-auto max-w-4xl p-4">
    @if (perfil(); as p) {
      <!-- cabeçalho -->
      <div class="bg-white shadow-xl rounded-2xl p-6 mb-6 border-t-4 border-emerald-600">
        <div class="flex flex-col md:flex-row items-start md:space-x-6">
          <!-- imagem -->
          <div class="relative group inline-block">
            <img [src]="fotoExibida" alt="Foto do Voluntário"
                 class="w-24 h-24 rounded-full object-cover ring-4 ring-white shadow-lg mb-4 md:mb-0 -mt-16" />
            <button (click)="abrirJanelaFoto()"
                    class="absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-40 text-white text-sm font-medium opacity-0 group-hover:opacity-100 rounded-full transition duration-200">
              Editar foto
            </button>
          </div>
          <div class="flex-1">
            <h2 class="text-3xl font-extrabold text-gray-800">{{ p.nome }}</h2>
            <div class="text-sm text-gray-600 space-y-1 mt-3">
              <p class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 text-gray-500" fill="none"
                     viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-2 4v7a2 2 0 01-2 2H5a2 2 0 01-2-2v-7"></path>
                </svg>
                {{ p.email }}
              </p>
              @if (p.telefone) {
                <p class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 text-gray-500" fill="none"
                       viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.75 21 3 14.25 3 6V5z"></path>
                  </svg>
                  {{ p.telefone }}
                </p>
              }
            </div>
          </div>
        </div>
      </div>
      <!-- Inscrições -->
      <div class="bg-white shadow-xl rounded-2xl p-6">
        <h3 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2">Minhas Inscrições</h3>
        <app-feed-inscricao></app-feed-inscricao>
      </div>
    } @else {
      <div class="bg-white shadow-xl rounded-2xl p-6 text-center">
        <p class="text-gray-700">Carregando perfil...</p>
      </div>
    }
    
    <!-- pop-up para editar foto -->
    <div *ngIf="mostrarJanelaFoto" class="fixed inset-0 flex items-center justify-center z-80">
      <div class="absolute inset-0 backdrop-brightness-[0.3] transition duration-300"></div>
      <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6 relative text-center">
        <button (click)="fecharJanelaFoto()" class="absolute top-2 right-3 text-gray-500 hover:text-gray-800 text-4xl leading-none">&times;</button>
        <h3 class="text-2xl font-bold text-gray-800 mb-4">Editar foto de perfil</h3>
        <p class="text-gray-600 mb-4">Selecione uma nova imagem para o seu perfil:</p>
        <input type="file" accept="image/*" (change)="uploadFoto($event)"
               class="block w-full text-sm text-gray-700 border border-gray-300 rounded-lg cursor-pointer focus:outline-none p-2" />
        <button (click)="removerFoto()" class="bg-red-500 text-white px-2 py-1 rounded-lg hover:bg-red-600 transition mt-4">Remover foto</button>
        @if (previewFoto) {
          <div class="mt-4 flex flex-col items-center">
            <img [src]="previewFoto" alt="Prévia da nova foto" class="w-24 h-24 rounded-full object-cover shadow-lg mb-3" />
            <button (click)="salvarNovaFoto(previewFoto)" class="bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition">Salvar</button>
          </div>
        }
      </div>
    </div>
  </div>
</div>
