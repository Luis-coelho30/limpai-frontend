<div class="relative w-full min-h-screen bg-cover bg-center bg-no-repeat" style="background-image: url('https://roteirosecotrilhas.com.br/wp-content/uploads/2019/08/mutirao-de-limpeza-de-praias.jpg');">
    <div class="flex justify-center min-h-screen">
    <!-- sidebar esquerda -->
    @if (isAuthenticated()) {
      <aside class="w-1/4 p-4 hidden lg:block">
        <div class="bg-white shadow-md rounded-2xl p-4 text-center">
          <img
            [src]="usuario.fotoUrl"
            alt="Foto de perfil"
            class="w-24 h-24 mx-auto rounded-full mb-3 object-cover"
          />
          <h2 class="text-lg font-semibold">{{ usuario.nome }}</h2>
          <p class="text-sm text-gray-600">{{ usuario.titulo }}</p>
          <p class="text-sm mt-4">
              <a href="perfil-voluntario" class="text-green-700 hover:underline font-medium">
              Ver perfil
              </a>
          </p>
        </div>
      </aside>
    } @else {
      <aside class="hidden lg:block w-1/4 p-4"></aside>
    }
  
    <!-- feed central -->
    <main class="w-full lg:w-2/4 p-4 space-y-4">
      <!-- Seção de Filtros -->
      <div class="bg-white shadow-md rounded-2xl p-4">
        <h3 class="font-semibold text-lg mb-3">Filtrar Campanhas</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
          <!-- Filtro de Estado -->
          <div class="flex flex-col">
            <label for="estado" class="text-sm font-medium text-gray-600 mb-1">Estado</label>
            <select id="estado" [(ngModel)]="estadoIdSelecionado" (ngModelChange)="onEstadoChange()" class="p-2 border border-gray-300 rounded-md">
              <option [ngValue]="null">Todos</option>
              @for (estado of estados(); track estado.estadoId) {
                <option [value]="estado.estadoId">{{ estado.nome }}</option>
              }
            </select>
          </div>
          <!-- Filtro de Cidade -->
          <div class="flex flex-col">
            <label for="cidade" class="text-sm font-medium text-gray-600 mb-1">Cidade</label>
            <select id="cidade" [(ngModel)]="cidadeIdSelecionada" [disabled]="!estadoIdSelecionado" class="p-2 border border-gray-300 rounded-md disabled:bg-gray-100">
              <option [ngValue]="null">Todas</option>
              @for (cidade of cidades(); track cidade.cidadeId) {
                <option [value]="cidade.cidadeId">{{ cidade.nome }}</option>
              }
            </select>
          </div>
          <!-- Botão de Aplicar Filtro -->
          <button (click)="aplicarFiltros()" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-md shadow-md transition h-fit">Aplicar Filtros</button>
        </div>
        <div class="mt-3 flex items-center">
          <input type="checkbox" id="historico" [(ngModel)]="mostrarHistorico" class="h-4 w-4 text-teal-600 border-gray-300 rounded">
          <label for="historico" class="ml-2 text-sm text-gray-700">Mostrar apenas campanhas encerradas</label>
        </div>
      </div>

      @for (campanha of campanhas(); track campanha.campanhaId) {
        <div
          (click)="isAuthenticated() && navegarParaCampanha(campanha.campanhaId)"
          [class.cursor-pointer]="isAuthenticated()"
          [class.hover:shadow-lg]="isAuthenticated()"
          [class.cursor-default]="!isAuthenticated()"
          class="bg-white shadow-md rounded-2xl p-4 transition"
      >
          <h3 class="text-lg font-semibold text-gray-800">{{ campanha.nome }}</h3>
          <p class="text-sm text-gray-500 mt-1">{{ campanha.localNome }} - {{ campanha.cidadeNome }}/{{ campanha.estadoSigla }}</p>
          
          <div class="mt-4 flex justify-between items-center text-sm text-gray-700">
            <div>
              <p><strong>Arrecadado:</strong> {{ campanha.fundosArrecadados | currency:'BRL' }}</p>
              <p class="text-xs text-gray-500">Meta: {{ campanha.metaFundos | currency:'BRL' }}</p>
            </div>
            <div class="text-right">
              <p><strong>Inscritos:</strong> {{ campanha.qtdInscritos }}</p>
              <p class="font-semibold" [class.text-red-500]="(campanha.dataFim | tempoRestante) === 'Campanha encerrada'">{{ campanha.dataFim | tempoRestante }}</p>
            </div>
          </div>
        </div>
      }
      

      <div class="flex justify-center mt-6" *ngIf="paginaAtual + 1 < totalPaginas">
        <button
          (click)="carregarMais()"
          class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-xl shadow-md transition"
        >
          Mostrar mais campanhas
        </button>
      </div>
    </main>
  
    <aside class="hidden lg:block w-1/4 p-4"></aside>
  </div>
  